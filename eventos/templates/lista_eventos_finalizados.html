{% extends 'base.html' %}

{% block title %}Eventos Finalizados - Associação Pichulas{% endblock %}

{% block content %}
<div class="mb-3">
    <a href="javascript:history.back()" class="text-decoration-none text-muted small px-1">
        <i class="bi bi-chevron-left"></i> Voltar
    </a>
</div>

<div class="d-flex justify-content-between align-items-end mb-4 px-1">
    <div>
        <h1 class="h3 mb-0 fw-bold text-dark" style="letter-spacing: -1px;">Histórico de Eventos</h1>
        <span class="badge bg-secondary text-white fw-bold" style="font-size: 0.7rem;">
            {{ eventos|length }} FINALIZADOS
        </span>
    </div>
    </div>

<div class="row g-3">
    {% for evento in eventos %}
    <div class="col-12">
        <div class="card border-0 shadow-sm rounded-4 overflow-hidden" style="opacity: 0.9;">
            <div class="card-body p-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <h5 class="fw-bold text-dark mb-1">{{ evento.nome_evento }}</h5>
                        <p class="mb-1 text-muted small">
                            <i class="bi bi-geo-alt-fill text-danger"></i> {{ evento.local_evento }}
                        </p>
                    </div>
                    <div class="text-end">
                        <span class="badge bg-light text-success border rounded-pill">
                            Concluído
                        </span>
                        <div class="small fw-bold mt-1 text-muted">R$ {{ evento.valor_da_cota }}</div>
                    </div>
                </div>

                <div class="d-flex align-items-center mt-2 p-2 rounded-3" style="background-color: #f1f3f5;">
                    <div class="me-3 text-center border-end pe-3">
                        <span class="d-block fw-bold text-secondary" style="font-size: 1.1rem;">{{ evento.data_evento|date }}</span>
                        <span class="text-uppercase text-muted" style="font-size: 0.7rem;">{{ evento.data_evento|date }}</span>
                    </div>
                    <div class="ps-1">
                        <small class="text-muted d-block">Realizado em</small>
                        <span class="fw-bold small">{{ evento.data_evento|date }}</span>
                    </div>
                </div>

                <div class="row g-2 mt-3">
                    <div class="col-12">
                        <a href="{% url 'relatorio_evento' evento.id %}" class="btn btn-dark w-100 rounded-3 py-2 fw-bold shadow-none" style="background-color: #343a40; border: none;">
                            <i class="bi bi-file-earmark-bar-graph me-2"></i> Gerar Relatório do Evento
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12 text-center py-5">
        <i class="bi bi-archive text-muted" style="font-size: 3rem; opacity: 0.3;"></i>
        <p class="text-muted mt-2">Nenhum evento finalizado encontrado.</p>
    </div>
    {% endfor %}
</div>

<style>
    body {
        background-color: #f8f9fa;
    }

    .card {
        border-left: 5px solid #6c757d !important; /* Cor cinza para indicar finalizado */
        transition: transform 0.2s ease;
    }

    /* Feedback tátil */
    .btn:active {
        transform: scale(0.98);
    }
</style>
{% endblock %}